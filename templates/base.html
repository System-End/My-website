<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}EndofTimee{% endblock %}</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&family=Exo+2:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="/public/logo.svg">
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="stylesheet" href="/static/boot-animation.css">
    
    <meta name="description" content="EndofTimee's personal site â€“ developer, streamer, and more. Featuring a unique boot animation and fox-themed design.">
    <meta property="og:title" content="EndofTimee â€“ Personal Site">
    <meta property="og:description" content="EndofTimee's personal site â€“ developer, streamer, and more. Featuring a unique boot animation and fox-themed design.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://endoftimee.com/">
    <meta property="og:image" content="/public/logo.svg">
    <meta property="og:image:alt" content="Fox Logo">
    <meta property="og:site_name" content="EndofTimee">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="EndofTimee â€“ Personal Site">
    <meta name="twitter:description" content="EndofTimee's personal site â€“ Developer, streamer, and more. Featuring a unique boot animation and fox-themed design.">
    <meta name="twitter:image" content="/public/logo.svg">
</head>
<body>
    <!-- EndOS Boot Animation -->
    <div id="endos-boot-container" class="endos-boot-container">
        <div class="visually-hidden">
            Website loading. EndOS boot sequence in progress.
        </div>

        <div class="boot-scan-line"></div>

        <div class="boot-visor-frame">
            <div class="visor-left-ear"></div>
            <div class="visor-right-ear"></div>

            <div class="boot-visor">
                <div class="visor-line top"></div>
                <div class="visor-line bottom"></div>

                <div id="boot-content" class="boot-content">
                    <!-- BIOS Check -->
                    <div id="stage-bios" class="boot-stage bios">
                        <div class="bios-header">END_OS BIOS v2.5</div>
                        <div class="boot-text-line">Initializing hardware...</div>
                        <div class="boot-text-line">CPU: ProtoCore i9 @ 4.7GHz</div>
                        <div class="boot-text-line">Memory: 16GB NeuralRAM</div>
                        <div class="boot-text-line">Checking system integrity... OK</div>
                        <div class="boot-text-line">Starting boot sequence...</div>
                    </div>

                    <!-- System Scan -->
                    <div id="stage-scan" class="boot-stage scan">
                        <div class="scan-header">SYSTEM SCAN</div>
                        <div class="scan-progress-container">
                            <div class="scan-progress-bar"></div>
                        </div>
                        <div class="scan-detail">Checking vital systems...</div>
                        <div class="scan-detail">Initializing neural pathways...</div>
                        <div class="scan-detail">Activating sensory modules...</div>
                        <div class="scan-detail">All systems nominal</div>
                    </div>

                    <!-- Module Loading -->
                    <div id="stage-modules" class="boot-stage modules">
                        <div class="module-header">LOADING CORE MODULES</div>
                        <div class="modules-grid">
                            <div class="module-item">
                                <div class="module-icon"></div>
                                <div class="module-name">ProtogenCore</div>
                            </div>
                            <div class="module-item">
                                <div class="module-icon"></div>
                                <div class="module-name">NeuralNet</div>
                            </div>
                            <div class="module-item">
                                <div class="module-icon"></div>
                                <div class="module-name">VisorDisplay</div>
                            </div>
                            <div class="module-item">
                                <div class="module-icon"></div>
                                <div class="module-name">FoxTraits</div>
                            </div>
                        </div>
                    </div>

                    <!-- Fox Protocol -->
                    <div id="stage-fox" class="boot-stage fox-protocol">
                        <div class="fox-header">ACTIVATING FOX PROTOCOLS</div>
                        <div class="fox-trait">Fluffy tail module: Online</div>
                        <div class="fox-trait">Fox ears: Calibrated</div>
                        <div class="fox-trait">Cuteness factor: Nonexistent</div>
                        <div class="fox-trait">Mischief subroutines: Loaded</div>
                        <div class="fox-trait">ProtoFox integration: Complete</div>
                    </div>

                    <!-- Logo Display -->
                    <div id="stage-logo" class="boot-stage logo-display">
                        <div class="endos-logo">
                            <span class="logo-end">End</span><span class="logo-os">OS</span>
                        </div>
                        <div class="logo-subtitle">ProtoFox Operating System</div>
                    </div>

                    <!-- System Ready -->
                    <div id="stage-ready" class="boot-stage system-ready">
                        <div class="ready-status">SYSTEM ACTIVATED</div>
                        <div class="welcome-message">Welcome back, ProtoFox</div>
                        <div class="boot-complete-message">EndOS v1.0 is fully operational</div>
                    </div>
                </div>
            </div>
        </div>

        <button id="skip-button" class="skip-button" aria-label="Skip boot animation">
            SKIP BOOT SEQUENCE
        </button>
    </div>

    <!-- Main Site Content (hidden until boot completes) -->
    <div id="main-site" class="min-h-screen bg-background-primary" style="display: none;">
        <!-- Background Logo -->
        <div class="background-logo">
            <img src="/public/logo.jpg" alt="Background Logo" class="logo-image">
        </div>
        
        <!-- Main Content -->
        <div class="relative">
            <!-- Navigation -->
            <nav class="navbar">
                <div class="nav-container">
                    <a href="/" class="nav-brand">
                        <img src="/public/logo.svg" alt="Fox Logo" class="nav-logo">
                        <span class="nav-title">EndofTimee</span>
                    </a>
                    <div class="nav-links">
                        <a href="/" class="nav-link{% if active_page == "about" %} active{% endif %}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="8" r="4"></circle>
                                <path d="M20 21a8 8 0 1 0-16 0"></path>
                            </svg>
                            About
                        </a>
                        <a href="/projects" class="nav-link{% if active_page == "projects" %} active{% endif %}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="4" y="4" width="16" height="16" rx="2" ry="2"></rect>
                                <rect x="9" y="9" width="6" height="6"></rect>
                                <line x1="9" y1="1" x2="9" y2="4"></line>
                                <line x1="15" y1="1" x2="15" y2="4"></line>
                                <line x1="9" y1="20" x2="9" y2="23"></line>
                                <line x1="15" y1="20" x2="15" y2="23"></line>
                                <line x1="20" y1="9" x2="23" y2="9"></line>
                                <line x1="20" y1="14" x2="23" y2="14"></line>
                                <line x1="1" y1="9" x2="4" y2="9"></line>
                                <line x1="1" y1="14" x2="4" y2="14"></line>
                            </svg>
                            Projects
                        </a>
                    </div>
                </div>
            </nav>
            
            <!-- Page Content -->
            <main class="content-wrapper section-spacing">
                {% block content %}{% endblock %}
            </main>
            
            <!-- Footer -->
            <footer class="footer">
                <p>Â© 2023 - <span id="current-year">2024</span> EndofTimee. All rights reserved.</p>
                <div class="footer-meta">
                    <span class="footer-hint">Powered by Rust ðŸ¦€</span>
                    <div class="version-badge">v0.9.5-rust</div>
                </div>
            </footer>
        </div>
    </div>
    
    <script>
        document.getElementById('current-year').textContent = new Date().getFullYear();
        
        // Boot Animation Controller
        (function() {
            const bootContainer = document.getElementById('endos-boot-container');
            const mainSite = document.getElementById('main-site');
            const bootContent = document.getElementById('boot-content');
            const skipButton = document.getElementById('skip-button');
            
            // Check if we should skip the animation (already seen in this session)
            const urlParams = new URLSearchParams(window.location.search);
            const skipParam = urlParams.get('skipBoot');
            const sessionSeen = sessionStorage.getItem('endos-boot-complete') === 'true';
            
            if (skipParam === 'true' || sessionSeen) {
                completeAnimation();
                return;
            }
            
            // Boot sequence stages with timing
            const bootSequence = [
                { stage: 'bios', delay: 2500 },
                { stage: 'scan', delay: 3000 },
                { stage: 'modules', delay: 3000 },
                { stage: 'fox', delay: 3000 },
                { stage: 'logo', delay: 2500 },
                { stage: 'ready', delay: 2000 }
            ];
            
            let currentIndex = 0;
            
            function clearAllStages() {
                document.querySelectorAll('.boot-stage').forEach(el => {
                    el.classList.remove('active');
                });
            }
            
            function runNextStage() {
                if (currentIndex < bootSequence.length) {
                    const { stage, delay } = bootSequence[currentIndex];
                    
                    // Clear previous stages
                    clearAllStages();
                    
                    // Short delay for transition
                    setTimeout(() => {
                        bootContent.classList.add('active');
                        document.getElementById('stage-' + stage).classList.add('active');
                    }, 200);
                    
                    currentIndex++;
                    setTimeout(runNextStage, delay);
                } else {
                    // Animation complete
                    setTimeout(completeAnimation, 500);
                }
            }
            
            function completeAnimation() {
                bootContainer.style.display = 'none';
                mainSite.style.display = 'block';
                mainSite.style.opacity = '0';
                mainSite.style.transition = 'opacity 0.5s ease-in-out';
                
                requestAnimationFrame(() => {
                    mainSite.style.opacity = '1';
                });
                
                sessionStorage.setItem('endos-boot-complete', 'true');
            }
            
            // Skip button handler
            skipButton.addEventListener('click', completeAnimation);
            
            // Start boot sequence after a short delay
            setTimeout(runNextStage, 500);
        })();
    </script>
    {% block scripts %}{% endblock %}
</body>
</html>
